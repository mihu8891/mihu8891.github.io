<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Islamic Portal</title>
<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
<style>
/* ===== Global ===== */
*{box-sizing:border-box;margin:0;padding:0;}
body{font-family:'Roboto',sans-serif;transition:background 0.5s,color 0.5s;}
.light-mode{background:#f2f7f1;color:#333;}
.dark-mode{background:#121212;color:#f5f5f5;}
header{background:#2e7d32;color:#fff;text-align:center;padding:25px;position:relative;}
header h1{font-size:28px;}
#mode-toggle{position:absolute;top:20px;right:20px;padding:8px 15px;border:none;border-radius:8px;background:#fff;color:#2e7d32;cursor:pointer;font-weight:bold;}

/* ===== Tabs ===== */
nav{display:flex;justify-content:space-around;background:#81c784;flex-wrap:wrap;}
nav button{flex:1;margin:3px;padding:12px;border:none;border-radius:10px;background:#81c784;color:#1b5e20;font-weight:bold;cursor:pointer;transition:0.3s;}
nav button.active,nav button:hover{background:#4caf50;color:#fff;}

/* ===== Sections ===== */
section{display:none;max-width:700px;margin:25px auto;padding:25px;border-radius:15px;box-shadow:0 5px 25px rgba(0,0,0,0.1);background:rgba(255,255,255,0.9);transition:transform 0.3s;}
section.active{display:block;transform:scale(1.02);}
h2{margin-bottom:15px;display:flex;align-items:center;gap:10px;color:#2e7d32;}
input{padding:10px;margin-right:10px;border-radius:8px;border:1px solid #ccc;width:60%;max-width:220px;}
button.tool-btn{padding:10px 20px;border-radius:8px;border:none;background:#2e7d32;color:#fff;cursor:pointer;margin:5px 0;transition:0.3s;}
button.tool-btn:hover{background:#1b5e20;}
#quran-ayah{display:block;font-style:italic;margin-top:10px;}
section:hover{box-shadow:0 8px 30px rgba(0,0,0,0.2);transform:translateY(-3px);}
@media(max-width:700px){nav{flex-direction:column;} input{width:100%;margin-bottom:10px;}}

/* ===== Bonus: Countdown & Popup ===== */
#ramadan-countdown{margin:15px 0;font-weight:bold;color:#d32f2f;}
#dua-popup{position:fixed;bottom:20px;right:20px;background:#fff;border-radius:10px;padding:15px;box-shadow:0 5px 20px rgba(0,0,0,0.2);z-index:1000;display:none;}
#dua-popup button{margin-top:10px;background:#2e7d32;}
/* ===== Background Animation ===== */
body::before{content:"";position:fixed;top:0;left:0;width:100%;height:100%;background:url('https://i.ibb.co/6B6ZTnK/arabic-pattern.png') repeat;opacity:0.05;pointer-events:none;z-index:-1;}
</style>
</head>
<body class="light-mode">

<header>
<h1>ğŸ•Œ Islamic Portal</h1>
<button id="mode-toggle">Dark Mode</button>
</header>

<nav>
<button class="tab-btn active" data-tab="prayer">ğŸ•‹ Prayer Times</button>
<button class="tab-btn" data-tab="qibla">ğŸ“ Qibla Compass</button>
<button class="tab-btn" data-tab="hijri">ğŸ“… Hijri Date</button>
<button class="tab-btn" data-tab="ayah">ğŸ“– Quran Ayah</button>
<button class="tab-btn" data-tab="tasbeeh">ğŸ”¢ Tasbeeh Counter</button>
</nav>

<!-- Ramadan Countdown -->
<section id="prayer" class="active">
<h2>ğŸ•‹ Prayer Times Calculator</h2>
<div id="ramadan-countdown"></div>
<input type="text" id="city" placeholder="Enter city (e.g., Karachi)">
<button class="tool-btn" onclick="getPrayerTimes()">Get Times</button>
<div id="prayer-times"></div>
</section>

<section id="qibla">
<h2>ğŸ“ Qibla Compass</h2>
<p>Direction to Kaaba:</p>
<p id="qibla-direction">Click below to get direction</p>
<button class="tool-btn" onclick="getQibla()">Get Qibla</button>
</section>

<section id="hijri">
<h2>ğŸ“… Hijri Calendar</h2>
<div id="hijri-date">Loading...</div>
<button class="tool-btn" onclick="getHijri()">Refresh</button>
</section>

<section id="ayah">
<h2>ğŸ“– Daily Quran Ayah</h2>
<button class="tool-btn" onclick="getAyah()">Get Ayah</button>
<span id="quran-ayah"></span>
</section>

<section id="tasbeeh">
<h2>ğŸ”¢ Digital Tasbeeh Counter</h2>
<p>Count: <span id="count">0</span></p>
<button class="tool-btn" onclick="increment()">Add</button>
<button class="tool-btn" onclick="resetCounter()">Reset</button>
</section>

<!-- Dua Popup -->
<div id="dua-popup">
<p>â€œØ§Ù„Ù„Ù‘Ù‡Ù Ù„Ø§ Ø¥ÙÙ„Ù°Ù‡Ù Ø¥ÙÙ„Ù‘Ø§ Ù‡ÙÙˆÙ Ø§Ù„Ù’Ø­ÙÙŠÙÙ‘ Ø§Ù„Ù’Ù‚ÙÙŠÙÙ‘ÙˆÙ…Ùâ€</p>
<button class="tool-btn" onclick="closeDua()">Close</button>
</div>

<script>
// ===== Tabs =====
const tabs=document.querySelectorAll('.tab-btn');
const sections=document.querySelectorAll('section');
tabs.forEach(tab=>{tab.addEventListener('click',()=>{tabs.forEach(t=>t.classList.remove('active'));sections.forEach(s=>s.classList.remove('active'));tab.classList.add('active');document.getElementById(tab.dataset.tab).classList.add('active');});});

// ===== Light/Dark Mode =====
const modeBtn=document.getElementById('mode-toggle');
modeBtn.addEventListener('click',()=>{
document.body.classList.toggle('dark-mode');
document.body.classList.toggle('light-mode');
modeBtn.innerText=document.body.classList.contains('dark-mode')?'Light Mode':'Dark Mode';
});

// ===== Tasbeeh =====
let count=0;
function increment(){count++;document.getElementById("count").innerText=count;}
function resetCounter(){count=0;document.getElementById("count").innerText=count;}

// ===== Quran Ayah =====
async function getAyah(){
try{const res=await fetch('https://api.alquran.cloud/v1/ayah/random/en.asad');const data=await res.json();document.getElementById("quran-ayah").innerText=data.data.text;}
catch(err){document.getElementById("quran-ayah").innerText="Error fetching ayah";}}

// ===== Hijri Date =====
async function getHijri(){
try{const res=await fetch('https://api.aladhan.com/v1/gToH?date='+new Date().toISOString().slice(0,10));
const data=await res.json();
const hijri=data.data.hijri;
document.getElementById("hijri-date").innerText=`${hijri.day} ${hijri.month.en} ${hijri.year} AH`;}
catch(err){document.getElementById("hijri-date").innerText="Error fetching date";}}

// ===== Prayer Times =====
async function getPrayerTimes(){
const city=document.getElementById("city").value;if(!city){alert("Enter city");return;}
try{const res=await fetch(`https://api.aladhan.com/v1/timingsByCity?city=${city}&country=&method=2`);
const data=await res.json();const times=data.data.timings;let html="<ul>";
for(const [key,value] of Object.entries(times)){html+=`<li>${key}: ${value}</li>`;}
html+="</ul>";document.getElementById("prayer-times").innerHTML=html;}
catch(err){document.getElementById("prayer-times").innerText="Error fetching times";}}

// ===== Qibla Compass =====
async function getQibla(){if(navigator.geolocation){navigator.geolocation.getCurrentPosition(async function(pos){const lat=pos.coords.latitude;const lon=pos.coords.longitude;const res=await fetch(`https://api.aladhan.com/v1/qibla/${lat}/${lon}`);const data=await res.json();document.getElementById("qibla-direction").innerText=`Direction: ${data.data.direction.toFixed(2)}Â° from North`;});} else {document.getElementById("qibla-direction").innerText="Geolocation not supported";}}

// ===== Bonus: Ramadan Countdown =====
function ramadanCountdown(){
  const now=new Date();
  let ramadan=new Date(now.getFullYear(),2,11); // Example: March 11 as Ramadan start
  if(now>ramadan){ramadan.setFullYear(ramadan.getFullYear()+1);}
  const diff=Math.floor((ramadan-now)/1000/60/60/24);
  document.getElementById("ramadan-countdown").innerText=`Days until Ramadan: ${diff}`;
}
ramadanCountdown();

// ===== Bonus: Dua Popup =====
const duaPopup=document.getElementById('dua-popup');
window.onload=setTimeout(()=>{duaPopup.style.display='block';},2000);
function closeDua(){duaPopup.style.display='none';}

// Auto-load Hijri date
getHijri();
</script>

</body>
</html>
